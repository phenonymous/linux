Listen 80
Listen 443

ServerAdmin webmaster@localhost
ServerName phen.stream
DocumentRoot /var/www/phen.io

ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined

ErrorDocument 404 /cus_404.html
ErrorDocument 403 /cus_403.html
ErrorDocument 500 /cus_50x.html
ErrorDocument 502 /cus_50x.html
ErrorDocument 503 /cus_50x.html
ErrorDocument 504 /cus_50x.html

<Location / >
#	Require ip 127.0.0.1
 #   Require ip 1.3.3
</Location>

<Location "/robots.txt" >
	SetHandler none
	Require all granted
</Location>

<VirtualHost *:443>
	#ServerName phen.stream
	ServerAlias www.phen.stream

	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"
</VirtualHost>

<VirtualHost *:443>
	ServerName sick.phen.stream
	ServerAlias tv.phen.stream
    
    RewriteEngine On
	RewriteCond %{HTTP_HOST} ^sick\.phen\.stream$ [NC]
	RewriteRule ^ https://tv.phen.stream%{REQUEST_URI} [L,R=301,NE]
    
	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"
	
	ProxyPass / http://localhost:9091/
	ProxyPassReverse / http://localhost:9091/

	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName couch.phen.stream
	ServerAlias movies.phen.stream
    
    RewriteEngine On
	RewriteCond %{HTTP_HOST} ^sick\.phen\.stream$ [NC]
	RewriteRule ^ https://tv.phen.stream%{REQUEST_URI} [L,R=301,NE]

	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"
	
	ProxyPass / http://localhost:5050/
	ProxyPassReverse / http://localhost:5050/

	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName sab.phen.stream
	ServerAlias nzb.phen.stream
    
    RewriteEngine On
	RewriteCond %{HTTP_HOST} ^sick\.phen\.stream$ [NC]
	RewriteRule ^ https://tv.phen.stream%{REQUEST_URI} [L,R=301,NE]
	
	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"

	ProxyPass / http://localhost:8080/
	ProxyPassReverse / http://localhost:8080/

	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName htpc.phen.stream
	
	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"

	ProxyPass / http://localhost:8085/
	ProxyPassReverse / http://localhost:8085/

	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName wmin.phen.stream
	ServerAlias admin.phen.stream
    
    RewriteEngine On
	RewriteCond %{HTTP_HOST} ^sick\.phen\.stream$ [NC]
	RewriteRule ^ https://tv.phen.stream%{REQUEST_URI} [L,R=301,NE]
	
	<Location / >
		Require all granted
	</Location>
	
	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"

	ProxyPass / http://localhost:10000/
	ProxyPassReverse / http://localhost:10000/

	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName hydra.phen.stream
	
	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"

	ProxyPass / http://localhost:5075/
	ProxyPassReverse / http://localhost:5075/
	
	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName guac.phen.stream
	ServerAlias remote.phen.stream
    
	RewriteEngine On
	RewriteCond %{HTTP_HOST} ^sick\.phen\.stream$ [NC]
	RewriteRule ^ https://tv.phen.stream%{REQUEST_URI} [L,R=301,NE]
	
	<Location / >
		Require all granted
		#ProxyPass ajp://localhost:7575/guacamole/ max=20 flushpackets=on
		#ProxyPassReverse http://localhost:7575/guacamole/
		#ProxyPassReverseCookiePath /guacamole/ /
	</Location>
	
	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"

	ProxyPass / ajp://localhost:8009/guacamole/ max=20 flushpackets=on
	ProxyPassReverse / http://localhost/guacamole/
	ProxyPassReverseCookiePath /guacamole/ /

	SetEnvIf Request_URI "^/guacamole/tunnel" dontlog
	CustomLog /var/log/apache2/guac.log common env=!dontlog
	
	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName plex.phen.stream
	
	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"

	ProxyRequests Off
	ProxyPreserveHost On
	ProxyPass / http://localhost:32400/
	ProxyPassReverse / http://localhost:32400/

	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName trans.phen.stream
	ServerAlias torrent.phen.stream
    
    RewriteEngine On
	RewriteCond %{HTTP_HOST} ^sick\.phen\.stream$ [NC]
	RewriteRule ^ https://tv.phen.stream%{REQUEST_URI} [L,R=301,NE]
	
	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"
	
	ProxyPass / http://localhost:8095/
	ProxyPassReverse / http://localhost:8095/

	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName sonarr.phen.stream
	#Sonarr placeholder

	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"

	<Location / >
		Require ip 127.0.0.1
	</Location>
    <Location "/cus_403.html">
		Require all granted
	</Location>
	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:443>
	ServerName radarr.phen.stream
	#Radarr placeholder

	SSLEngine On
	SSLCertificateFile "/etc/apache2/ssl/cert.pem"
	SSLCertificateKeyFile "/etc/apache2/ssl/privkey.pem"
	SSLCertificateChainFile "/etc/apache2/ssl/chain.pem"

	<Location / >
		Require ip 127.0.0.1
	</Location>
	<Location "/cus_403.html">
		Require all granted
	</Location>
	<Location "/robots.txt">
		Redirect permanent /robots.txt https://phen.stream/robots.txt
	</Location>
</VirtualHost>

<VirtualHost *:80>
	ServerName phen.stream
	ServerAlias www.phen.stream tv.phen.stream sick.phen.stream sab.phen.stream nzb.phen.stream movies.phen.stream couch.phen.stream htpc.phen.stream wmin.phen.stream admin.phen.stream hydra.phen.stream guac.phen.stream remote.phen.stream plex.phen.stream trans.phen.stream torrent.phen.stream sonarr.phen.stream radarr.phen.stream

	RewriteEngine On
	RewriteCond %{HTTPS} off
	RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</VirtualHost>

<VirtualHost *:80>
	ServerName phen.stream
	ServerAlias *.phen.stream

	Redirect permanent / https://phen.stream/
</VirtualHost>

<VirtualHost *:443>
	ServerName phen.stream
	ServerAlias *.phen.stream

	Redirect permanent / https://phen.stream/
</VirtualHost>
